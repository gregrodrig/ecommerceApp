<!DOCTYPE html>
<html lang="es">
<html>

<head>
  <meta charset="UTF-8" />
  <title>Formulario de categoría</title>
  <link rel="stylesheet" type="text/css" href="../../style.css">
</head>

<body>
  <div class="wrapper">
    <aside>
      <header>
        <h1 class="logo">Nueva Categoría</h1>
      </header>
      <nav>
      </nav>
      <footer>
        <p class="texto-footer">© 2023 Greys'2 Coder </p>
      </footer>
    </aside>
    <main>
      <form id="formulario" onsubmit="submitForm(event)">
        <div class="mb-3 row">
          <label for="nombre">Nombre:</label>
          <br>
          <input type="text" id="nombre" name="nombre" required>
        </div>
        <div class="mb-3">
          <div id="contenedor-botones-form">
            <button id="btn-enviar" class="btn-enviar" type="submit">Agregar</button>
            <button id="atras" onclick="goBack()">Ir Atrás</button>
          </div>
        </div>
      </form>
      <script>
        function submitForm(event) {
          event.preventDefault();
          json = {
            id: 0,
            nombre: document.getElementById('nombre').value,
          }
          console.log(JSON.stringify(json));
          fetch('https://localhost:7289/api/Categoria', {
            method: 'POST',
            body: JSON.stringify(json),
            headers: { 'Content-Type': 'application/json' }
          })
            .then(response => response.json())
            .then(data => {
              console.log(data);
              formulario.reset();
              alert("Nueva Categoria agregada!")
            })
            .catch(error => console.error(error));
        }
      </script>
      <script>
        function goBack() {
          window.history.back();
        }
      </script>
    </main>
    <section>
    </section>
  </div>
</body>

</html>